<!DOCTYPE html>
<html lang="pl">
  
<head>
  <meta charset="utf-8">
  <title>Szlaki turystyczne w Wałbrzychu - interaktywna mapa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./assets/css/styles.css" />
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.15.0/mapbox-gl.css" rel="stylesheet">
  <style>
    @media screen and (min-width: 1025px) {
      #timelineWrap {
        position: absolute !important;
        left: 20px !important;
        bottom: 26px !important;
        transform: none !important;
      }
    }
  </style>
</head>

<body>
<div id="app">
  <button id="fabMenu" aria-label="Menu">
    <span class="bars"><span class="bar b1"></span><span class="bar b2"></span><span class="bar b3"></span></span>
  </button>
  <button id="sidebarToggle" aria-label="Pokaż/ukryj listę">
    <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    <span style="font-weight:700">Menu</span>
  </button>
  <div id="map" aria-label="Mapa szlaków"></div>
  <aside id="sidebar" aria-label="Lista szlaków">
    <div class="head">
      <div class="title">Szlaki piesze – Wałbrzych</div>
      <div class="meta">kliknij szlak, by uruchomić animację i śledzenie kamery</div>
    </div>
    <div class="actions-top">
      <div id="searchBox" class="chip">
        <input id="searchInput" type="search" placeholder="Szukaj trasy lub miejsca…" aria-label="Szukaj" />
        <button id="searchClear" title="Wyczyść">✕</button>
      </div>
      <button id="btnStop" class="btn" disabled>Resetuj animację</button>
    </div>
    <div id="list" role="listbox" aria-label="Wybierz szlak do animacji"></div>
  </aside>
  <div id="timelineWrap" aria-label="Oś czasu animacji">
    <button id="btnPause" class="btn chip">Pauza</button>
    <button id="btnReplay" class="btn chip icon" aria-label="Odtwórz ponownie" title="Odtwórz ponownie"><svg viewBox="0 0 24 24" width="18" height="18" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" fill="currentColor"/></svg></button>
    <button id="btnDownload" class="btn chip icon" aria-label="Pobierz KML/PNG" title="Pobierz KML/PNG (Google Maps)"><svg viewBox="0 0 24 24" width="18" height="18" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 3v10m0 0 4-4m-4 4-4-4M5 21h14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
    <select id="speedSelect" class="chip" aria-label="Prędkość odtwarzania">
  <option value="0.5">0.5×</option>
  <option value="1" selected>1×</option>
  <option value="1.75">1.75×</option>
  <option value="2.25">2.25×</option>
</select>
    <div id="timeCounter" class="chip" aria-live="polite"><span class="now">00:00</span> <span class="sep">/</span> <span class="total">00:00</span></div>
    <input id="timeline" type="range" min="0" max="1000" step="1" value="0"/>
  </div>
<div id="loader" class="loader">Wczytywanie danych…</div>

<!-- Przycisk lupy i wysuwany pasek wyszukiwania -->
<div id="searchControl" class="search-control">
  <!-- Ikona lupy -->
  <button id="searchToggleBtn" class="search-toggle-btn" aria-label="Wyszukaj">
    <svg viewBox="0 0 24 24">
      <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
    </svg>
  </button>
  
  <!-- Wysuwany pasek wyszukiwania - USUNIĘTY -->
  
  <!-- Wyniki wyszukiwania - USUNIĘTE -->
</div>

</div>
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.15.0/mapbox-gl.js"></script>
  <script src="https://unpkg.com/@turf/turf@6/turf.min.js"></script>
  <script src="./js/config.local.js"></script>
  <script src="./js/config.ui.js"></script>
  <script src="./js/lib/map-helpers.js"></script>
  <script src="./js/lib/trail-images.js"></script>
  <!-- New modular export system -->
  <script src="./js/lib/route-export.js"></script>
  <script src="./js/lib/route-export-integration.js"></script>
  <script src="./js/app.js"></script>
</body>
</html>
